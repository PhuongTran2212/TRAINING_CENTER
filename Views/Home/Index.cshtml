@* @{
    ViewData["Title"] = "Home Page";
}

<div class="text-center">
    <h1 class="display-4">Welcome</h1>
    <p>Learn about <a href="https://learn.microsoft.com/aspnet/core">building Web apps with ASP.NET Core</a>.</p>
</div>  *@
@model IEnumerable<TrungTamDaoTao.ViewModels.DangKyHocViewModel>
@{
    ViewData["Title"] = "Trang chủ";
}
<section class="hero-section py-5 bg-light rounded-3 mb-5">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6 mb-4 mb-lg-0">
                <h1 class="display-4 fw-bold mb-3">Nâng cao kỹ năng, <span class="text-primary">mở rộng tương lai</span></h1>
                <p class="lead mb-4">Khám phá hàng trăm khóa học chất lượng cao từ các giảng viên hàng đầu. Học bất cứ lúc nào, bất cứ nơi đâu và nâng cao sự nghiệp của bạn.</p>
                @* <div class="d-flex flex-wrap gap-2">
                    <a asp-controller="DangKyHoc" asp-action="DanhSachKhoaHoc" class="btn btn-primary btn-lg">
                        <i class="fas fa-book-open me-2"></i>Khám phá khóa học
                    </a>
                    <a asp-controller="Account" asp-action="DangKy" class="btn btn-outline-dark btn-lg">
                        <i class="fas fa-user-plus me-2"></i>Đăng ký ngay
                    </a>
                </div> *@
            </div>
            <div class="col-lg-6 text-center">
                <img src="~/images/index.jpg" alt="Học tập trực tuyến" class="img-fluid" style="max-height: 400px;" onerror="this.src='/placeholder.svg?height=400&width=500'; this.onerror=null;">
            </div>
        </div>
    </div>
</section>
<!-- Featured Courses Section -->
<section class="mb-5">
    <div class="container">
        <div class="text-center mb-4">
            <h2 class="fw-bold">Khóa học nổi bật</h2>
            <p class="text-muted">Những khóa học được yêu thích nhất tại Trung tâm</p>
        </div>
        <div class="row g-4">
            @if (Model.Any())
            {
                @foreach (var item in Model)
                {
                    <div class="col-md-6 col-lg-4">
                        <div class="card h-100 shadow-sm hover-shadow @(item.SoLuongConLai <= 0 ? "bg-light" : "")">
                            <div class="card-header bg-primary text-white">
                                <h5 class="card-title mb-0">@item.KhoaHoc.TenKhoaHoc</h5>
                            </div>
                            <div class="card-body d-flex flex-column">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    @if (item.SoLuongConLai <= 3 && item.SoLuongConLai > 0)
                                    {
                                        <span class="badge bg-warning">Còn @item.SoLuongConLai chỗ</span>
                                    }
                                    else if (item.SoLuongConLai <= 0)
                                    {
                                        <span class="badge bg-danger">Hết chỗ</span>
                                    }
                                    else 
                                    {
                                        <span class="badge bg-success">Còn trống</span>
                                    }
                                </div>
                                <p class="mb-1"><i class="fas fa-user me-2"></i> <strong>Giảng viên:</strong> @item.KhoaHoc.GiangVien</p>
                                <p class="mb-1"><i class="fas fa-calendar-alt me-2"></i> <strong>Khai giảng:</strong> @item.KhoaHoc.ThoiGianKhaiGiang.ToString("dd/MM/yyyy")</p>
                                <p class="mb-1"><i class="fas fa-clock me-2"></i> <strong>Thời gian:</strong> @item.KhoaHoc.NgayBatDau.ToString("dd/MM/yyyy") - @item.KhoaHoc.NgayKetThuc.ToString("dd/MM/yyyy")</p>
                                
                                <div class="progress mt-3 mb-2">
                                    @{
                                        int phanTramDangKy = item.KhoaHoc.SoLuongToiDa > 0 ? (int)((double)item.SoLuongDaDangKy / item.KhoaHoc.SoLuongToiDa * 100) : 0;
                                        string progressColorClass = phanTramDangKy >= 80 ? "bg-danger" : (phanTramDangKy >= 50 ? "bg-warning" : "bg-success");
                                    }
                                    <div class="progress-bar @progressColorClass" role="progressbar" style="width: @phanTramDangKy%" 
                                         aria-valuenow="@phanTramDangKy" aria-valuemin="0" aria-valuemax="100">@phanTramDangKy%</div>
                                </div>
                                <p class="small text-muted mb-3">
                                    <i class="fas fa-users me-1"></i> @item.SoLuongDaDangKy/@item.KhoaHoc.SoLuongToiDa học viên đăng ký
                                </p>
                                
                                <div class="mt-auto">
                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                        <span class="fw-bold text-primary">@item.KhoaHoc.HocPhi.ToString("N0")₫</span>
                                    </div>
                                    <div class="d-flex gap-2">
                                        @* <a asp-controller="KhoaHoc" asp-action="ChiTiet" asp-route-id="@item.KhoaHoc.KhoaHocId" class="btn btn-outline-info flex-grow-1">
                                            <i class="fas fa-info-circle me-1"></i> Chi tiết
                                        </a> *@
                                        
                                        @if (item.DaDangKy)
                                        {
                                            <button class="btn btn-success flex-grow-1" disabled>
                                                <i class="fas fa-check-circle me-1"></i> Đã đăng ký
                                            </button>
                                        }
else if (item.SoLuongConLai > 0)
{
    @if (User.Identity.IsAuthenticated)
    {
        <a asp-controller="KhoaHoc" asp-action="DangKy" asp-route-id="@item.KhoaHoc.KhoaHocId" class="btn btn-primary flex-grow-1">
            <i class="fas fa-sign-in-alt me-1"></i> Đăng ký
        </a>
    }
    else
    {
        <a href="javascript:void(0)" onclick="showLoginRequiredMessage('@item.KhoaHoc.KhoaHocId')" class="btn btn-primary flex-grow-1">
            <i class="fas fa-sign-in-alt me-1"></i> Đăng ký
        </a>
    }
}
                                        else
                                        {
                                            <button class="btn btn-secondary flex-grow-1" disabled>
                                                <i class="fas fa-ban me-1"></i> Đã đầy
                                            </button>
                                        }
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            }
            else
            {
                <div class="col-12 text-center">
                    <div class="p-5">
                        <img src="/api/placeholder/120/120" alt="No courses" class="mb-3" />
                        <h5>Không có khóa học nào</h5>
                        <p class="text-muted">Hiện tại chưa có khóa học nào được mở. Vui lòng quay lại sau.</p>
                    </div>
                </div>
            }
        </div>
    </div>
    
</section>

<!-- Why Choose Us Section -->
<section class="py-5 bg-light rounded-3 mb-5">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="fw-bold">Tại sao chọn Trung Tâm Đào Tạo?</h2>
            <p class="text-muted">Chúng tôi cam kết mang đến trải nghiệm học tập tốt nhất cho học viên</p>
        </div>
        
        <div class="row g-4">
            <div class="col-md-6 col-lg-3">
                <div class="text-center">
                    <div class="feature-icon bg-primary bg-gradient text-white rounded-circle mb-3">
                        <i class="fas fa-chalkboard-teacher fa-2x p-3"></i>
                    </div>
                    <h5 class="fw-bold">Giảng viên chất lượng</h5>
                    <p class="text-muted">Đội ngũ giảng viên giàu kinh nghiệm, chuyên môn cao từ các doanh nghiệp hàng đầu.</p>
                </div>
            </div>
            
            <div class="col-md-6 col-lg-3">
                <div class="text-center">
                    <div class="feature-icon bg-primary bg-gradient text-white rounded-circle mb-3">
                        <i class="fas fa-laptop-code fa-2x p-3"></i>
                    </div>
                    <h5 class="fw-bold">Học thực tế</h5>
                    <p class="text-muted">Chương trình đào tạo gắn liền với thực tiễn, tập trung vào kỹ năng thực hành.</p>
                </div>
            </div>
            
            <div class="col-md-6 col-lg-3">
                <div class="text-center">
                    <div class="feature-icon bg-primary bg-gradient text-white rounded-circle mb-3">
                        <i class="fas fa-certificate fa-2x p-3"></i>
                    </div>
                    <h5 class="fw-bold">Chứng chỉ giá trị</h5>
                    <p class="text-muted">Chứng chỉ được công nhận rộng rãi bởi các doanh nghiệp trong ngành.</p>
                </div>
            </div>
            
            <div class="col-md-6 col-lg-3">
                <div class="text-center">
                    <div class="feature-icon bg-primary bg-gradient text-white rounded-circle mb-3">
                        <i class="fas fa-headset fa-2x p-3"></i>
                    </div>
                    <h5 class="fw-bold">Hỗ trợ 24/7</h5>
                    <p class="text-muted">Đội ngũ hỗ trợ luôn sẵn sàng giải đáp mọi thắc mắc của học viên.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Statistics Section -->
<section class="mb-5">
    <div class="container">
        <div class="row g-4 text-center">
            <div class="col-6 col-md-3">
                <div class="p-4 border rounded shadow-sm">
                    <div class="display-4 fw-bold text-primary mb-2">50+</div>
                    <p class="text-muted mb-0">Khóa học</p>
                </div>
            </div>
            
            <div class="col-6 col-md-3">
                <div class="p-4 border rounded shadow-sm">
                    <div class="display-4 fw-bold text-primary mb-2">30+</div>
                    <p class="text-muted mb-0">Giảng viên</p>
                </div>
            </div>
            
            <div class="col-6 col-md-3">
                <div class="p-4 border rounded shadow-sm">
                    <div class="display-4 fw-bold text-primary mb-2">5000+</div>
                    <p class="text-muted mb-0">Học viên</p>
                </div>
            </div>
            
            <div class="col-6 col-md-3">
                <div class="p-4 border rounded shadow-sm">
                    <div class="display-4 fw-bold text-primary mb-2">98%</div>
                    <p class="text-muted mb-0">Hài lòng</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Testimonials Section -->
<section class="py-5 bg-light rounded-3 mb-5">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="fw-bold">Học viên nói gì về chúng tôi</h2>
            <p class="text-muted">Những đánh giá từ học viên đã tham gia khóa học</p>
        </div>
        
        <div class="row g-4">
            <div class="col-md-6 col-lg-4">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body">
                        <div class="mb-3 text-warning">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                        </div>
                        <p class="card-text mb-4">"Khóa học Lập trình Web Fullstack đã giúp tôi từ một người không biết gì về lập trình trở thành một developer chuyên nghiệp. Cảm ơn Trung tâm rất nhiều!"</p>
                        <div class="d-flex align-items-center">
                            <img src="~/images/testimonial-1.jpg" alt="Nguyễn Văn A" class="rounded-circle me-3" width="50" height="50" onerror="this.src='/placeholder.svg?height=50&width=50'; this.onerror=null;">
                            <div>
                                <h6 class="mb-0 fw-bold">Nguyễn Văn A</h6>
                                <small class="text-muted">Web Developer tại ABC Company</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6 col-lg-4">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body">
                        <div class="mb-3 text-warning">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                        </div>
                        <p class="card-text mb-4">"Giảng viên rất nhiệt tình và chuyên nghiệp. Tôi đã học được rất nhiều kiến thức và kỹ năng thiết kế đồ họa mà trước đây chưa từng biết đến."</p>
                        <div class="d-flex align-items-center">
                            <img src="~/images/testimonial-2.jpg" alt="Trần Thị B" class="rounded-circle me-3" width="50" height="50" onerror="this.src='/placeholder.svg?height=50&width=50'; this.onerror=null;">
                            <div>
                                <h6 class="mb-0 fw-bold">Trần Thị B</h6>
                                <small class="text-muted">Graphic Designer Freelancer</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6 col-lg-4">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body">
                        <div class="mb-3 text-warning">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star-half-alt"></i>
                        </div>
                        <p class="card-text mb-4">"Khóa học Digital Marketing đã giúp tôi hiểu rõ hơn về cách xây dựng chiến lược marketing online hiệu quả. Kiến thức rất thực tế và áp dụng được ngay."</p>
                        <div class="d-flex align-items-center">
                            <img src="~/images/testimonial-3.jpg" alt="Lê Văn C" class="rounded-circle me-3" width="50" height="50" onerror="this.src='/placeholder.svg?height=50&width=50'; this.onerror=null;">
                            <div>
                                <h6 class="mb-0 fw-bold">Lê Văn C</h6>
                                <small class="text-muted">Marketing Manager tại XYZ Corp</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="py-5 bg-primary text-white rounded-3 mb-5">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-8 mb-4 mb-lg-0">
                <h2 class="fw-bold mb-3">Sẵn sàng nâng cao kỹ năng của bạn?</h2>
                <p class="lead mb-0">Đăng ký ngay hôm nay để nhận ưu đãi giảm 20% cho khóa học đầu tiên!</p>
            </div>
            <div class="col-lg-4 text-lg-end">
                <a asp-controller="Account" asp-action="DangKy" class="btn btn-light btn-lg">
                    <i class="fas fa-user-plus me-2"></i>Đăng ký ngay
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Partners Section -->
<section class="mb-5">
    <div class="container">
        <div class="text-center mb-4">
            <h2 class="fw-bold">Đối tác của chúng tôi</h2>
            <p class="text-muted">Những doanh nghiệp tin tưởng và hợp tác cùng Trung tâm</p>
        </div>
        
        <div class="row g-4 align-items-center justify-content-center">
            <div class="col-4 col-md-2 text-center">
                <img src="~/images/dn1.jpg" alt="Partner 1" class="img-fluid" style="max-height: 60px;" onerror="this.src='/placeholder.svg?height=60&width=120'; this.onerror=null;">
            </div>
            <div class="col-4 col-md-2 text-center">
                <img src="~/images/dn2.jpg" alt="Partner 2" class="img-fluid" style="max-height: 60px;" onerror="this.src='/placeholder.svg?height=60&width=120'; this.onerror=null;">
            </div>
            <div class="col-4 col-md-2 text-center">
                <img src="~/images/dn3.jpg" alt="Partner 3" class="img-fluid" style="max-height: 60px;" onerror="this.src='/placeholder.svg?height=60&width=120'; this.onerror=null;">
            </div>
            <div class="col-4 col-md-2 text-center">
                <img src="~/images/dn4.jpg" alt="Partner 4" class="img-fluid" style="max-height: 60px;" onerror="this.src='/placeholder.svg?height=60&width=120'; this.onerror=null;">
            </div>
            <div class="col-4 col-md-2 text-center">
                <img src="~/images/dn5.jpg" alt="Partner 5" class="img-fluid" style="max-height: 60px;" onerror="this.src='/placeholder.svg?height=60&width=120'; this.onerror=null;">
            </div>
            <div class="col-4 col-md-2 text-center">
                <img src="~/images/dn6.jpg" alt="Partner 6" class="img-fluid" style="max-height: 60px;" onerror="this.src='/placeholder.svg?height=60&width=120'; this.onerror=null;">
            </div>
        </div>
    </div>
</section>

@section Styles {
    <link rel="stylesheet" href="~/css/index.css" />
}
@section Scripts {
    <script>
// Function to show login required message
function showLoginRequiredMessage(khoaHocId) {
  var loginUrl = "/Account/DangNhap"
  var dangKyUrl = "/KhoaHoc/DangKy"

  // Tạo modal với màu sắc mới
  var modalHtml = `
    <div class="modal fade" id="loginRequiredModal" tabindex="-1" aria-labelledby="loginRequiredModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header bg-primary text-white">
            <h5 class="modal-title" id="loginRequiredModalLabel">Thông báo</h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="text-center mb-3">
              <i class="fas fa-exclamation-circle fa-3x"></i>
            </div>
            <p class="text-center">Bạn phải đăng nhập để đăng ký khóa học này!</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-outline-primary" data-bs-dismiss="modal">Đóng</button>
            <a href="${loginUrl}?returnUrl=${dangKyUrl}?id=${khoaHocId}" class="btn btn-primary">
              <i class="fas fa-sign-in-alt me-1"></i> Đăng nhập ngay
            </a>
          </div>
        </div>
      </div>
    </div>`

  // Thêm modal vào body
  document.body.insertAdjacentHTML("beforeend", modalHtml)

  // Hiển thị modal
  var modal = new bootstrap.Modal(document.getElementById("loginRequiredModal"))
  modal.show()

  // Xóa modal sau khi ẩn
  document.getElementById("loginRequiredModal").addEventListener("hidden.bs.modal", function () {
    this.remove()
  })
        }
    </script>
}
